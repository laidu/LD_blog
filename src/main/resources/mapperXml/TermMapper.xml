<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.laidu.blog.mapper.TermMapper">
  <resultMap id="ChildrenResultMap" type="org.laidu.blog.domain.Term">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 09 09:11:24 CST 2016.
    -->
    <id column="term_id" jdbcType="BIGINT" property="termId" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="slug" jdbcType="VARCHAR" property="slug" />
    <result column="count" jdbcType="BIGINT" property="count" />
    <result column="term_group" jdbcType="BIGINT" property="termGroup" />
  </resultMap>

  <resultMap id="ParentResultMap" type="org.laidu.blog.domain.TermParent">
    <!-- WARNING - @mbggenerated This element is automatically generated by
        MyBatis Generator, do not modify. This element was generated on Sat Sep 03
        18:50:53 CST 2016. -->
    <id column="term_id" jdbcType="BIGINT" property="termId" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="slug" jdbcType="VARCHAR" property="slug" />
    <result column="term_group" jdbcType="BIGINT" property="termGroup" />
    <collection property="children" ofType="org.laidu.blog.domain.Term">

    </collection>

  </resultMap>

  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 09 09:11:24 CST 2016.
    -->
    terms.term_id, name, slug, term_group
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="ChildrenResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 09 09:11:24 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    from terms
    where term_id = #{termId,jdbcType=BIGINT}
  </select>

  <select id="getParentTerm" resultMap="ParentResultMap">
    <!-- WARNING - @mbggenerated This element is automatically generated by
        MyBatis Generator, do not modify. This element was generated on Sat Sep 03
        19:08:10 CST 2016. -->
    select
    <include refid="Base_Column_List" />
    from terms, term_taxonomy
    where terms.term_id =
    term_taxonomy.term_taxonomy_id and term_taxonomy.parent = 0
  </select>
  <select id="getParentNav" resultMap="ParentResultMap">
    <!-- WARNING - @mbggenerated This element is automatically generated by
        MyBatis Generator, do not modify. This element was generated on Sat Sep 03
        19:08:10 CST 2016. -->
    select
    <include refid="Base_Column_List" />
    from terms, term_taxonomy
    where terms.term_id =
    term_taxonomy.term_taxonomy_id and term_taxonomy.parent = 0 and
    term_taxonomy.taxonomy="nav_menu"
  </select>

  <select id="getChildrenNavByPerentId" parameterType="java.lang.Long"
          resultMap="ChildrenResultMap">
    select
    <include refid="Base_Column_List" /> , term_taxonomy.count
    from terms, term_taxonomy
    where term_taxonomy.parent =
    #{termId,jdbcType=BIGINT} and terms.term_id =
    term_taxonomy.term_taxonomy_id and term_taxonomy.taxonomy="category"
  </select>
  <select id="getChildrenTermByPerentId" parameterType="java.lang.Long"
          resultMap="ChildrenResultMap">
    select
    <include refid="Base_Column_List" /> , term_taxonomy.count
    from terms, term_taxonomy
    where term_taxonomy.parent =
    #{termId,jdbcType=BIGINT} and terms.term_id =
    term_taxonomy.term_taxonomy_id
  </select>

  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 09 09:11:24 CST 2016.
    -->
    delete from terms
    where term_id = #{termId,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="org.laidu.blog.domain.Term">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 09 09:11:24 CST 2016.
    -->
    insert into terms (term_id, name, slug, 
      term_group)
    values (#{termId,jdbcType=BIGINT}, #{name,jdbcType=VARCHAR}, #{slug,jdbcType=VARCHAR}, 
      #{termGroup,jdbcType=BIGINT})
  </insert>
  <insert id="insertSelective" parameterType="org.laidu.blog.domain.Term">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 09 09:11:24 CST 2016.
    -->
    insert into terms
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="termId != null">
        term_id,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="slug != null">
        slug,
      </if>
      <if test="termGroup != null">
        term_group,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="termId != null">
        #{termId,jdbcType=BIGINT},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="slug != null">
        #{slug,jdbcType=VARCHAR},
      </if>
      <if test="termGroup != null">
        #{termGroup,jdbcType=BIGINT},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="org.laidu.blog.domain.Term">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 09 09:11:24 CST 2016.
    -->
    update terms
    <set>
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="slug != null">
        slug = #{slug,jdbcType=VARCHAR},
      </if>
      <if test="termGroup != null">
        term_group = #{termGroup,jdbcType=BIGINT},
      </if>
    </set>
    where term_id = #{termId,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="org.laidu.blog.domain.Term">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 09 09:11:24 CST 2016.
    -->
    update terms
    set name = #{name,jdbcType=VARCHAR},
      slug = #{slug,jdbcType=VARCHAR},
      term_group = #{termGroup,jdbcType=BIGINT}
    where term_id = #{termId,jdbcType=BIGINT}
  </update>
</mapper>